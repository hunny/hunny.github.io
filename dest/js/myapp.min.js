/*myapp builds at 2015-12-13 15:33:15 */
angular.module("angularLazyImg",[]),angular.module("angularLazyImg").factory("LazyImgMagic",["$window","$rootScope","lazyImgConfig","lazyImgHelpers",function(a,b,c,d){"use strict";function e(){for(var a=o.length-1;a>=0;a--){var b=o[a];b&&d.isElementInView(b.$elem[0],q.offset,m)&&(j(b),o.splice(a,1))}0===o.length&&h()}function f(a){t.forEach(function(b){b[a]("scroll",r),b[a]("touchmove",r)}),n[a]("resize",r),n[a]("resize",s)}function g(){p=!0,setTimeout(function(){e(),f("on")},1)}function h(){p=!1,f("off")}function i(a){var b=o.indexOf(a);-1!==b&&o.splice(b,1)}function j(a){var c=new Image;c.onerror=function(){q.errorClass&&a.$elem.addClass(q.errorClass),b.$emit("lazyImg:error",a),q.onError(a)},c.onload=function(){k(a.$elem,a.src),q.successClass&&a.$elem.addClass(q.successClass),b.$emit("lazyImg:success",a),q.onSuccess(a)},c.src=a.src}function k(a,b){"img"===a[0].nodeName.toLowerCase()?a[0].src=b:a.css("background-image",'url("'+b+'")')}function l(a){this.$elem=a}var m,n,o,p,q,r,s,t;return o=[],p=!1,q=c.getOptions(),n=angular.element(a),m=d.getWinDimensions(),s=d.throttle(function(){m=d.getWinDimensions()},60),t=[q.container||n],r=d.throttle(e,30),l.prototype.setSource=function(a){this.src=a,o.unshift(this),p||g()},l.prototype.removeImage=function(){i(this),0===o.length&&h()},l.prototype.checkImages=function(){e()},l.addContainer=function(a){h(),t.push(a),g()},l.removeContainer=function(a){h(),t.splice(t.indexOf(a),1),g()},l}]),angular.module("angularLazyImg").provider("lazyImgConfig",function(){"use strict";this.options={offset:100,errorClass:null,successClass:null,onError:function(){},onSuccess:function(){}},this.$get=function(){var a=this.options;return{getOptions:function(){return a}}},this.setOptions=function(a){angular.extend(this.options,a)}}),angular.module("angularLazyImg").factory("lazyImgHelpers",["$window",function(a){"use strict";function b(){return{height:a.innerHeight,width:a.innerWidth}}function c(a,b,c){var d=a.getBoundingClientRect(),e=c.height+b;return d.left>=0&&d.right<=c.width+b&&(d.top>=0&&d.top<=e||d.bottom<=e&&d.bottom>=0-b)}function d(a,b,c){var d,e;return function(){var f=c||this,g=+new Date,h=arguments;d&&d+b>g?(clearTimeout(e),e=setTimeout(function(){d=g,a.apply(f,h)},b)):(d=g,a.apply(f,h))}}return{isElementInView:c,getWinDimensions:b,throttle:d}}]),angular.module("angularLazyImg").directive("lazyImg",["$rootScope","LazyImgMagic",function(a,b){"use strict";function c(c,d,e){var f=new b(d);e.$observe("lazyImg",function(a){a&&f.setSource(a)}),c.$on("$destroy",function(){f.removeImage()}),a.$on("lazyImg.runCheck",function(){f.checkImages()}),a.$on("lazyImg:refresh",function(){f.checkImages()})}return{link:c,restrict:"A"}}]).directive("lazyImgContainer",["LazyImgMagic",function(a){"use strict";function b(b,c){a.addContainer(c),b.$on("$destroy",function(){a.removeContainer(c)})}return{link:b,restrict:"A"}}]),function(a){"use strict";a.module("app.directives",["directive.header"]).run(function(){console.log("angular app[directives] load finished......")})}(window.angular),function(a){"use strict";a.module("directive.header",[]).directive("header",["$parse","PATH",function(a,b){return{restrict:"E",templateUrl:b.tpl+"header.tpl.html",replace:!0,scope:{},link:function(a,b,c){}}}]).directive("footer",["$parse","PATH",function(a,b){return{restrict:"E",templateUrl:b.tpl+"footer.tpl.html",replace:!0,scope:{},link:function(a,b,c){}}}])}(window.angular),function(a){"use strict";a.module("app.service",[])}(window.angular),function(a){"use strict";var b=a.module("service.home",["ngResource"]);b.factory("httpResource",["$resource","PATH",function(a,b){return a(b.relativePath+"home/item"+b.suffix+"/:id",{id:"@id"})}]),b.factory("httpHome",["$q","httpResource","$resource","PATH",function(a,b,c,d){return{getById:function(c){var d=a.defer();return b.get({id:c},function(a,b){d.resolve(a)},function(a,b){d.reject(a)}),d.promise},query:function(){var b=a.defer();return c(d.relativePath+"home/items"+d.suffix).query(function(a,c){b.resolve(a)},function(a,c){b.reject(a)}),b.promise}}}])}(window.angular),function(a){"use strict";a.module("app.controllers",["controller.index","controller.home","controller.itemimages","controller.itemimageslist","controller.itemimagesrest"]).run(function(){})}(window.angular),function(a){"use strict";a.element(document).ready(function(){});var b=a.module("controller.home",["service.home"]);b.run(function(){}),b.controller("homeController",["$scope","httpHome",function(a,b){b.query().then(function(b){a.items=b})}])}(window.angular),function(a){"use strict";a.element(document).ready(function(){console.log("index page loading completed"),$("img.identifyimage").bind("load",function(){$("div.row, div.progress").toggleClass("hidden")})});var b=a.module("controller.index",["angularLazyImg"]);b.run(function(){console.log("angular app [controller.index] run load finished......")}),b.controller("indexController",["$scope",function(a){console.log("controller.index loading."),a.items=[[{name:"早起_定期锻炼",desc:"早起，定期锻炼",type:"png"},{name:"走出安逸区_不惧怕竞争",desc:"走出安逸区，不惧怕竞争",type:"png"},{name:"克服恐惧_时刻升级自己",desc:"克服恐惧，时刻升级自己",type:"png"}],[{name:"学会独处_对自己的成长负责",desc:"学会独处，对自己的成长负责",type:"png"},{name:"改掉一个坏习惯_养成一个好习惯",desc:"改掉一个坏习惯，养成一个好习惯",type:"png"},{name:"远离消极人群_离开电视",desc:"远离消极人群，离开电视",type:"png"}],[{name:"坚持阅读_尝试学一门新课程",desc:"坚持阅读，尝试学一门新课程",type:"png"},{name:"立即行动_向人学习",desc:"立即行动，向人学习",type:"png"},{name:"听取别人的意见_了解自身缺点",desc:"听取别人的意见，了解自身缺点",type:"png"}]],a.showPage=!0,a.bootstrapshow="show",console.log("controller.index loaded.")}])}(window.angular),function(a){"use strict";var b=a.module("controller.itemimages",["service.home"]);b.controller("itemimagesController",["$scope","$routeParams","$location","PATH","httpHome",function(a,b,c,d,e){e.getById(b.id).then(function(b){a.title=b.title,a.resource=d.resource,a.imagePath=d.image;for(var c=[],e=0;;){var f=b.list.slice(e,e+3);if(0===f.length)break;c.push(f),e+=3}a.items=c},function(a){c.path("list")})}])}(window.angular),function(a){"use strict";var b=a.module("controller.itemimageslist",["service.home"]);b.controller("itemimageslistController",["$scope","$location","httpHome",function(b,c,d){d.query().then(function(a){b.items=a}),b.checkall=!1,b.deleteCount=0,b.onadd=function(a){var c={};c.uuid=""+b.items.length,c.title="KKKK"+b.items.length,c.date=new Date,b.items.push(c)},b.ondelete=function(a){a["delete"]=!0},b.onlock=function(a){a["delete"]=!1},b.onedit=function(a,b){b["delete"]||c.path("#"+a+"/"+b.uuid)},b.oncheck=function(){b.checkall=!b.checkall,a.forEach(b.items,function(a,c){b.items[c]["delete"]=b.checkall})},b.onsavedelete=function(){for(var a=b.items.length-1;a>=0;a--)b.items[a]["delete"]&&b.items.splice(a,1)},b.$watch("items",function(c,d){if(void 0!==c||void 0!==d){var e=b.items.length,f=0;a.forEach(b.items,function(a,c){b.items[c]["delete"]&&f++}),b.deleteCount=f,b.checkall=0!==e&&e===f}},!0)}])}(window.angular),function(a){"use strict";var b=a.module("controller.itemimagesrest",["service.home"]);b.controller("itemimagesrestController",["$scope","httpHome",function(a,b){b.query().then(function(b){a.items=b})}])}(window.angular),function(a){"use strict";a.element(document).ready(function(){console.log("page loading completed")});var b=a.module("app",["ngRoute","app.directives","app.controllers"]);b.constant("PATH",{relativePath:"dest/data/",resource:"dest/resource/",tpl:"dest/tpl/",image:"dest/data/upload/",suffix:""}),b.config(["$routeProvider","PATH",function(a,b){a.when("",{redirectTo:"/list"}).when("/list",{templateUrl:b.tpl+"home.tpl.html",controller:"homeController"}).when("/itemimages/:id",{templateUrl:b.tpl+"itemimages.tpl.html",controller:"itemimagesController"}).when("/listimages",{templateUrl:b.tpl+"itemimages.list.tpl.html",controller:"itemimageslistController"}).when("/restimages/:id",{templateUrl:b.tpl+"itemimages.rest.tpl.html",controller:"itemimagesrestController"}).when("/restimages",{templateUrl:b.tpl+"itemimages.rest.tpl.html",controller:"itemimagesrestController"}).otherwise({redirectTo:"/list"})}]),b.run(function(){console.log("angular app run load finished......")})}(window.angular);
/*Author:Hunny.Hu*/